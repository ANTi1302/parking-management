package dao;

import java.sql.Connection;
import java.sql.Date;
import java.sql.PreparedStatement;

import connectDB.ConnectDB;
import entity.KhachHang;

public class KhachHang_Dao {

	public boolean create(KhachHang nv) {
		ConnectDB.getInstance();
		Connection con=(Connection) ConnectDB.getConnection();
		PreparedStatement stmt=null;
		int n=0;
		try {
			stmt=con.prepareStatement("INSERT INTO [dbo].[Custemer]([fullname],[student_id],[username],[password],[email],[phone],[card_id],[created_at],\r\n"
					+ "[updated_at]) values(?,?,?,?,?,?,?,?,?)");
			stmt.setString(1,nv.getFullname());
			stmt.setString(2,nv.getStudent_id());
			stmt.setString(3,nv.getUsername());
			stmt.setString(4,nv.getPassword());
			stmt.setString(5,nv.getEmail());
			stmt.setString(6,nv.getPhone());
			stmt.setString(7,nv.getCard_id());
			stmt.setDate(8,(Date) nv.getCreated_at());
			stmt.setString(9,nv.getUpdated_at());
			SimpleDateFormat simpleDateFormat=new SimpleDateFormat("yyyy-MM-dd");
			String date= simpleDateFormat.format(nv.getNgayVaoLam());
			stmt.setString(6, date);
			stmt.setString(7,nv.getSdt());
			stmt.setString(8,nv.getChucVu().getMaChucVu());
			
			n=stmt.executeUpdate();
		} catch (SQLException e) {
			// TODO: handle exception
			e.printStackTrace();
		}
		finally {
			try {
				stmt.close();
			} catch (SQLException e2) {
				// TODO: handle exception
				e2.printStackTrace();
			}
		}return n>0;
	}
}
